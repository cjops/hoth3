<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Title of the document</title>
<script>
console.log("Hello world");

</script>
</head>

<body>
	<script>
      function bestCoords(targetDistance, originCoords, testCoords, fn) {

        //var destinationB = {lat: 50.087, lng: 14.421};

        targetDistance = targetDistance / 2.0;

        var targetDistanceInMeters = targetDistance * 1609.344;

        var service = new google.maps.DistanceMatrixService;
        service.getDistanceMatrix({
          origins: [originCoords],
          destinations: testCoords,
          travelMode: 'WALKING',
          unitSystem: google.maps.UnitSystem.IMPERIAL
        }, callback);

        function callback(response, status) {
          if (status !== 'OK') {
            alert('Error was: ' + status);
          } else {
          	var i;
          	var diff;
          	var minDiff = Math.abs(targetDistanceInMeters - response.rows[0].elements[0].distance.value);
          	var closestMatch = 0;
          	for (i = 0; i < response.rows[0].elements.length; i++) {
          		if (response.rows[0].elements[i].status == 'OK') {
	          		diff = Math.abs(targetDistanceInMeters - response.rows[0].elements[i].distance.value);
	          		if (diff < minDiff) {
	          			minDiff = diff;
	          			closestMatch = i;
	          		}
	          	}
          	}
            console.log(response);
            fn(response.destinationAddresses[closestMatch]);
          }
        }
      }

		function initMap() {
			var targetDistance = 4.0; // 4 miles roundtrip
			var originCoords = {lat: 34.074111, lng: -118.450001};
			var testCoords = ['10861 Weyburn Ave, Los Angeles, CA', '225 Charles E Young Dr E, Los Angeles, CA', '1200 Getty Center Dr, Los Angeles, CA'];
			bestCoords(targetDistance, originCoords, testCoords, function(addie) {
				console.log(addie);
			});
		}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyByoS05nipwhqvtVKwNP1pl10dMyEpQPV0&callback=initMap">
    </script>
</body>

</html>