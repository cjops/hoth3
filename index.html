<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Title of the document</title>
<script>
console.log("Hello world");

</script>
</head>

<body>
	<script>
      function bestCoords(targetDistance, origin, testCoords, fn) {

        //var destinationB = {lat: 50.087, lng: 14.421};

        targetDistance = targetDistance / 2.0;

        var targetDistanceInMeters = targetDistance * 1609.344;

        var service = new google.maps.DistanceMatrixService;
        service.getDistanceMatrix({
          origins: [origin],
          destinations: testCoords,
          travelMode: 'WALKING',
          unitSystem: google.maps.UnitSystem.IMPERIAL
        }, callback);

        function callback(response, status) {
          if (status !== 'OK') {
            alert('Error was: ' + status);
          } else {
          	var i;
          	var diff;
          	var minDiff = Math.abs(targetDistanceInMeters - response.rows[0].elements[0].distance.value);
          	var closestMatch = 0;
          	for (i = 0; i < response.rows[0].elements.length; i++) {
          		if (response.rows[0].elements[i].status == 'OK') {
	          		diff = Math.abs(targetDistanceInMeters - response.rows[0].elements[i].distance.value);
	          		if (diff < minDiff) {
	          			minDiff = diff;
	          			closestMatch = i;
	          		}
	          	}
          	}
          	console.log(closestMatch);
            console.log(response);
            fn(response.destinationAddresses[closestMatch]);
          }
        }
      }

      function generateTestCoords(origin, targetDistance)
      {
			var J = 25;
			var heading = 0;
			var testCoords = [];
			var k;
			for (k = 0; k < J; k++) {
				testCoords[k] = google.maps.geometry.spherical.computeOffset(origin, targetDistance * 1609.344 / 2.0, heading);
				heading += (360 / J);
			}
			return testCoords;
      }

		function initMap() {
			var targetDistance = 4.0; // 4 miles roundtrip
			//var origin = {lat: 34.074111, lng: -118.450001};
			var origin = new google.maps.LatLng(34.056001, -118.233443);
			console.log(origin);
			//var testCoords = ['10861 Weyburn Ave, Los Angeles, CA', '225 Charles E Young Dr E, Los Angeles, CA', '1200 Getty Center Dr, Los Angeles, CA'];
			var testCoords = generateTestCoords(origin, targetDistance);
			bestCoords(targetDistance, origin, testCoords, function(addie) {
				console.log(addie);
			});
			//var offset = google.maps.geometry.spherical.computeOffset(origin, 2000, 0);
			//console.log(offset);
		}
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyByoS05nipwhqvtVKwNP1pl10dMyEpQPV0&libraries=geometry&callback=initMap">
    </script>
</body>

</html>